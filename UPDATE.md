# update.md - 更新履歴

## 2026-02-02 (v0.1)
- 初版公開
- 動画再生・シーク機能（区間再生・ループ・往復再生対応）
- クロップ範囲の指定・リサイズ・移動
- クロップ変更のUndo/Redo対応
- 解像度プリセットの選択・追加・保存・削除
- トリミング範囲内のPNG連番出力 / MP4出力
- クリップボードへのコピー
- 動画・設定ファイルの自動読み込み・保存

## 2026-02-03 (v0.2)
- デスクトップ録画ツールを新規追加（録画開始/停止、プレビュー、ファイル管理、閉じて編集）
- 録画ツールで FPS（15/30/60）と画質（高/中/低）を選択可能に
- メインウィンドウ左上に「録画ツール」起動ボタンを追加
- 座標ロック・解像度ロック機能を追加（🔓/🔒 ボタン）
- PNG書き出し中のプログレスバーをモーダル・中央表示・最前面に改善
- シークバーのドラッグ精度をフレーム単位に向上
- クロップ赤枠の太さを動画解像度に応じて自動調整
- 「座標」「解像度」セクション間に視覚的セパレータを追加

## 2026-02-04 (v0.2.1)
- **クロップ解像度が不正確な不具合修正**: クロップ解像度の数値が実際に出力される解像度と異なる不具合を修正
- **ウィンドウ状態の完全復元**: 終了時の「最大化状態」「ウィンドウサイズ」「位置」を記憶し、次回起動時に復元
- **マルチモニター対応**: セカンダリモニターでの位置を正確に復元（負の座標にも対応）
- **再生位置の記憶**: 動画ごとに最後の再生位置を保存し、次回起動時に同じ位置から再生
- **レイアウトの固定化**: 下側の操作パネルを450pxに固定し、ユーザーが誤って動かせないように改善
- **ウィンドウ最小サイズの設定**: 800x600を最小サイズとして定義し、レイアウト崩れを防止
- **設定保存の改善**: 「設定保存」「設定確認」ボタンが正しく動作するように修正
- **再読み込み機能の強化**: 「再読込」ボタンで動画ファイルの完全な再初期化を実行
- **浮動小数点タイムスタンプ対応**: start_time/end_timeをフレーム精度で保存可能に

## 2026-02-05 (v0.2.2)
- **ズームの安定化**: ホイールズームをレベル制に変更し、100%への正確な回帰を保証
- **ズーム起点の改善**: ズーム時、キャンバス中央の表示位置を維持するよう改善（パン中も同様）
- **UIハイコントラスト化**: ボタンの配色を鮮やかなハイコントラスト調に変更し視認性を向上
- **Undo/Redoの絵文字化**: 「戻す」「進む」ボタンを ↩️ / ↪️ に変更
- **入力欄の視認性向上**: X, Y, 幅, 高さのテキストボックスを大きくしフォントも統一
- **録画ツールの安定性向上**: スライダー操作時のクラッシュを修正

## 2026-02-08 (v0.2.3)
- **動画情報表示の強化**: 右上パネルに動画の FPS（秒間フレーム数）を表示するように改善
- **ボタン無反応バグの解消**: ツールチップがボタンと重なってクリックを妨害していた問題を、表示位置の調整により修正
- **設定保存のグローバル化**: PNG圧縮率、フレーム除外、再生設定（速度、ループ等）をアプリ共通設定に移行
- **Start/Endカラーのテーマ対応**: 開始（Start）と終了（End）の色をテーマ設定（`config.py`）から変更可能にし、デフォルトをより視認性の高い淡い色に変更
- **マウスカーソルの視覚フィードバック**: リサイズや移動がロックされている際、カーソルを「禁止（no）」マークに変更し、現在の状態を分かりやすく改善
- **マウスポインタのオーバーレイ表示**:
    - 録画と同時に記録したTSVから、再生時にマウスポインタの矢印や赤丸を再現して重ねて表示（ON/OFF可能）
    - マウスクリック時の波紋演出（色・サイズカスタマイズ可）
- **キー・マウス入力のオーバーレイ表示（字幕）**:
    - 録画時にキー入力・マウスクリックの履歴を記録し、再生・出力時に字幕として重ねて表示（ON/OFF可能）
    - 字幕で短期間に入力があった場合、下にずらして表示する「スタッキング」機能を実装
    - 字幕がじわーっと消えていく滑らかなフェードアウトを実現
- **録画ツールの操作性向上**: 
    - ダイアログ操作（削除・保存・フォルダ選択）後に録画ツールがメインウィンドウの背面に隠れてしまう問題を修正
    - ウィンドウの検索に対応
    - マウス、キーボードの入力履歴をTSVで記録する機能を追加
    - 録画画質・FPSの設定変更に対応
    - 前回録画したときのデスクトップ・ウィンドウの設定値をアプリ設定で記憶して次回起動時に復元するようにしました。
    - 選択したウィンドウの座標と大きさを表示して変更できるようにしました。
    - 録画画面でウィンドウを絞り込むときにプロセス名も比較対象にしました。
    - 録画が始まるまでのカウントダウンを表示するようにしました。
    - Windows Graphics Capture (WGC) を使用したウィンドウキャプチャを実装し、他窓が重なっても対象ウィンドウのみを綺麗に録画できるようにしました。
    - 録画プレビュー画面および再生プレイヤー画面で、マウスの中クリックドラッグによる「パン（移動）」と、ホイールによる「ズーム（拡大縮小）」が可能になりました。
    - 「プレビューを拡大・縮小する」チェックボックスを追加し、全体表示と詳細確認をスムーズに切り替えられるようにしました。
- **詳細設定ダイアログの追加**:
    - アプリ設定を変更するためのモーダルフォームのウィンドウを追加
    - マウスポインタ、入力字幕、外観テーマの3タブを設置しUIのデザインが設定変更可能
    - 各タブにリアルタイムプレビューを実装。変更がその場で確認可能
- **アプリ名称を「ChulipVideo」に変更**
 
+ ## 2026-02-11 (v0.3.0-beta)
+ - **ショートカットキー管理機能を追加**:
+     - 設定ダイアログのレイアウトを整理し、操作ボタンとリスト表示を整列。
+     - 複数行の選択、Ctrl+Aでの全選択、ドラッグ選択に対応。ラベルを「有効」「無効」などに簡潔化。
+ - **録画ツールの修正**:
+     - ボタンの色を `ChulipVideo_config.json` のテーマ設定から自由に変更可能に。
+     - 録画開始直後のカウントダウン中に停止ボタンを押すと、録画準備を中断できるように改善。
+     - WGC（ウィンドウ単体録画）モード時、対象ウィンドウが非アクティブな間はマウス・キー入力のオーバーレイ表示を自動的にスキップするように改善（別作業の入力が混じるのを防止）。
+ - **キャプチャ映像を仮想カメラに配信する機能を追加**:
+     - 仮想カメラ停止時に「No Signal」画面を数フレーム表示し、接続先での黒画面を防止。
